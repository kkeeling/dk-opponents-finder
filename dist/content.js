/*! For license information please see content.js.LICENSE.txt */
(()=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function n(t){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?e(Object(o),!0).forEach((function(e){r(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):e(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function r(e,n,r){return(n=function(e){var n=function(e){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(n)?n:n+""}(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function o(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return i(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,c=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw c}}}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function c(){"use strict";c=function(){return n};var e,n={},r=Object.prototype,o=r.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function f(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(e){f=function(t,e,n){return t[e]=n}}function p(t,e,n,r){var o=e&&e.prototype instanceof b?e:b,c=Object.create(o.prototype),a=new P(r||[]);return i(c,"_invoke",{value:K(t,n,a)}),c}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}n.wrap=p;var h="suspendedStart",g="suspendedYield",y="executing",v="completed",m={};function b(){}function w(){}function x(){}var O={};f(O,s,(function(){return this}));var D=Object.getPrototypeOf,F=D&&D(D(T([])));F&&F!==r&&o.call(F,s)&&(O=F);var E=x.prototype=b.prototype=Object.create(O);function S(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function L(e,n){function r(i,c,a,s){var l=d(e[i],e,c);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==t(f)&&o.call(f,"__await")?n.resolve(f.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):n.resolve(f).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,s)}))}s(l.arg)}var c;i(this,"_invoke",{value:function(t,e){function o(){return new n((function(n,o){r(t,e,n,o)}))}return c=c?c.then(o,o):o()}})}function K(t,n,r){var o=h;return function(i,c){if(o===y)throw Error("Generator is already running");if(o===v){if("throw"===i)throw c;return{value:e,done:!0}}for(r.method=i,r.arg=c;;){var a=r.delegate;if(a){var s=k(a,r);if(s){if(s===m)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===h)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=y;var l=d(t,n,r);if("normal"===l.type){if(o=r.done?v:g,l.arg===m)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=v,r.method="throw",r.arg=l.arg)}}}function k(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,k(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var i=d(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,m;var c=i.arg;return c?c.done?(n[t.resultName]=c.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):c:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function T(n){if(n||""===n){var r=n[s];if(r)return r.call(n);if("function"==typeof n.next)return n;if(!isNaN(n.length)){var i=-1,c=function t(){for(;++i<n.length;)if(o.call(n,i))return t.value=n[i],t.done=!1,t;return t.value=e,t.done=!0,t};return c.next=c}}throw new TypeError(t(n)+" is not iterable")}return w.prototype=x,i(E,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:w,configurable:!0}),w.displayName=f(x,u,"GeneratorFunction"),n.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},n.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,f(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},n.awrap=function(t){return{__await:t}},S(L.prototype),f(L.prototype,l,(function(){return this})),n.AsyncIterator=L,n.async=function(t,e,r,o,i){void 0===i&&(i=Promise);var c=new L(p(t,e,r,o),i);return n.isGeneratorFunction(e)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},S(E),f(E,u,"Generator"),f(E,s,(function(){return this})),f(E,"toString",(function(){return"[object Generator]"})),n.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},n.values=T,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(r,o){return a.type="throw",a.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var c=this.tryEntries[i],a=c.completion;if("root"===c.tryLoc)return r("end");if(c.tryLoc<=this.prev){var s=o.call(c,"catchLoc"),l=o.call(c,"finallyLoc");if(s&&l){if(this.prev<c.catchLoc)return r(c.catchLoc,!0);if(this.prev<c.finallyLoc)return r(c.finallyLoc)}else if(s){if(this.prev<c.catchLoc)return r(c.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return r(c.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var c=i?i.completion:{};return c.type=t,c.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),I(n),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;I(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:T(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),m}},n}function a(t,e,n,r,o,i,c){try{var a=t[i](c),s=a.value}catch(t){return void n(t)}a.done?e(s):Promise.resolve(s).then(r,o)}function s(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function c(t){a(i,r,o,c,s,"next",t)}function s(t){a(i,r,o,c,s,"throw",t)}c(void 0)}))}}function l(){console.log("DraftKings Opponents Finder: Scanning lobby page");var t=document.querySelectorAll(".slick-row");console.log("DraftKings Opponents Finder: Found contest rows:",t.length);var e=[];return t.forEach((function(t,n){var r=t.querySelectorAll(".slick-cell");if(r.length>=8){var o=r[1].querySelector("a"),i=o?o.id.split("_")[1]:null,c=o?o.textContent:"",a=r[3].querySelector(".grid-text-with-icon"),s=a?a.textContent.trim():"",l=r[5].querySelector(".grid-text-with-icon"),u=l?l.textContent.split("/"):[],f=u[0]?parseInt(u[0],10):0,p=u[1]?parseInt(u[1],10):0,d=r[6].querySelector(".cntr"),h=d?d.textContent:"";i&&(e.push({id:i,name:c,entryFee:s,currentEntries:f,maxEntries:p,startTime:h}),console.log("DraftKings Opponents Finder: Found eligible contest - ID: ".concat(i,", Name: ").concat(c,", Max Entries: ").concat(p)))}})),console.log("DraftKings Opponents Finder: Total eligible contests found:",e.length),e}function u(t){return"https://www.draftkings.com/contest/detailspop?contestId=".concat(t)}function f(t){return p.apply(this,arguments)}function p(){return(p=s(c().mark((function t(e){var n,r;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=u(e),console.log("DraftKings Opponents Finder: Fetching details for contest ID ".concat(e)),t.prev=2,t.next=5,fetch(n);case 5:if((r=t.sent).ok){t.next=8;break}throw new Error("HTTP error! status: ".concat(r.status));case 8:return console.log("DraftKings Opponents Finder: Successfully fetched details for contest ID ".concat(e)),t.next=11,r.text();case 11:return t.abrupt("return",t.sent);case 14:return t.prev=14,t.t0=t.catch(2),console.error("Error fetching contest details for ID ".concat(e,":"),t.t0),t.abrupt("return",null);case 18:case"end":return t.stop()}}),t,null,[[2,14]])})))).apply(this,arguments)}var d=new Map;function h(t,e){d.set(t,{data:e,timestamp:Date.now()}),console.log("DraftKings Opponents Finder: Cached processed data for contest ID ".concat(t))}function g(t){return y.apply(this,arguments)}function y(){return(y=s(c().mark((function t(e){var n,r,o;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!((n=d.get(e))&&Date.now()-n.timestamp<3e5)){t.next=5;break}return console.log("DraftKings Opponents Finder: Using cached data for contest ID ".concat(e)),t.abrupt("return",n.data);case 5:return console.log("DraftKings Opponents Finder: Cache miss for contest ID ".concat(e,", fetching fresh data")),t.next=8,f(e);case 8:if(!(r=t.sent)){t.next=13;break}return o=v(r),h(e,o),t.abrupt("return",o);case 13:return t.abrupt("return",null);case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function v(t){console.log("DraftKings Opponents Finder: Processing contest details");var e=(new DOMParser).parseFromString(t,"text/html").querySelector("#entrants-table");if(!e)return console.error("DraftKings Opponents Finder: Could not find entrants table"),null;var n=e.querySelectorAll("tr");console.log("DraftKings Opponents Finder: Found entrants:",n.length);var r={beginner:0,lowExperience:0,mediumExperience:0,highExperience:0,totalScore:0,maxScore:0,rating:0};return n.forEach((function(t){t.querySelectorAll("td").forEach((function(t){if(!t.classList.contains("empty-user")){var e=t.querySelector('span[title="Experience Badge"]');e?e.classList.contains("icon-experienced-user-1")?(r.lowExperience++,r.totalScore+=1):e.classList.contains("icon-experienced-user-3")?(r.mediumExperience++,r.totalScore+=2):e.classList.contains("icon-experienced-user-5")&&(r.highExperience++,r.totalScore+=3):r.beginner++,r.maxScore+=3}}))})),r.rating=r.maxScore>0?Math.round(r.totalScore/r.maxScore*100):0,console.log("DraftKings Opponents Finder: Processed opponent info:",r),r}function m(t){return b.apply(this,arguments)}function b(){return(b=s(c().mark((function t(e){var r,i,a,s,l,u;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("DraftKings Opponents Finder: Fetching and processing contests:",e.length),r=[],i=function(t){return new Promise((function(e){return setTimeout(e,t)}))},a=o(e),t.prev=4,a.s();case 6:if((s=a.n()).done){t.next=16;break}return l=s.value,t.next=10,g(l.id);case 10:return(u=t.sent)&&(r.push(n(n({},l),{},{opponentInfo:u})),console.log("DraftKings Opponents Finder: Processed contest ID ".concat(l.id))),t.next=14,i(1e3);case 14:t.next=6;break;case 16:t.next=21;break;case 18:t.prev=18,t.t0=t.catch(4),a.e(t.t0);case 21:return t.prev=21,a.f(),t.finish(21);case 24:return console.log("DraftKings Opponents Finder: Total processed contests:",r.length),t.abrupt("return",r);case 26:case"end":return t.stop()}}),t,null,[[4,18,21,24]])})))).apply(this,arguments)}function w(t){console.log("DraftKings Opponents Finder: Rendering info for contest ID ".concat(t.id));var e=document.createElement("span");e.className="dk-opponents-finder-info",e.style.cssText="\n    font-size: 11px;\n    padding: 2px 4px;\n    background-color: #f0f0f0;\n    border-radius: 3px;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    width: 100%;\n    height: 100%;\n  ";var n=t.opponentInfo.rating<33?"green":t.opponentInfo.rating<66?"orange":"red";return e.innerHTML='\n    <span style="font-weight: bold; color: '.concat(n,'; margin-bottom: 2px;">\n      ').concat(t.opponentInfo.rating,"%\n    </span>\n  "),e}function x(){return O.apply(this,arguments)}function O(){return(O=s(c().mark((function t(){var e,n;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("DraftKings Opponents Finder: Handling contest grid changes"),e=l(),console.log("DraftKings Opponents Finder: Eligible contests:",e.length),!(e.length>0)){t.next=12;break}return console.log("DraftKings Opponents Finder: Fetching contest details..."),t.next=7,m(e);case 7:n=t.sent,console.log("DraftKings Opponents Finder: Processed contests:",n.length),n.forEach((function(t){var e=document.querySelector('.slick-row a[id="name_'.concat(t.id,'"]'));if(e){var n=e.closest(".slick-row").querySelector(".slick-cell:nth-child(7)");if(n){n.innerHTML="",console.log("Rendering info for contest ID",t.id);var r=w(t);n.appendChild(r),console.log("DraftKings Opponents Finder: Rendered info for contest ID ".concat(t.id))}else console.log("DraftKings Opponents Finder: Could not find live cell for contest ID ".concat(t.id))}else console.log("DraftKings Opponents Finder: Could not find row for contest ID ".concat(t.id))})),t.next=13;break;case 12:console.log("DraftKings Opponents Finder: No eligible contests found");case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var D=function(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(){var o=this,i=arguments,c=r&&!n;clearTimeout(n),n=setTimeout((function(){n=null,r||t.apply(o,i)}),e),c&&t.apply(o,i)}}(x,2e3);function F(){return E.apply(this,arguments)}function E(){return(E=s(c().mark((function t(){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("DraftKings Opponents Finder: Main function called"),void 0,n="www.draftkings.com"===window.location.hostname&&window.location.pathname.includes("/lobby"),console.log("DraftKings Opponents Finder: Is lobby page?",n),n?(console.log("DraftKings Opponents Finder: Initializing on lobby page..."),e=void 0,(e=document.querySelector(".grid-canvas"))?(console.log("DraftKings Opponents Finder: Setting up MutationObserver"),new MutationObserver(D).observe(e,{childList:!0,subtree:!0}),console.log("DraftKings Opponents Finder: MutationObserver set up successfully")):console.error("DraftKings Opponents Finder: Could not find contest grid"),console.log("DraftKings Opponents Finder: Scheduling initial scan"),setTimeout((function(){console.log("DraftKings Opponents Finder: Executing initial scan"),x()}),2e3)):console.log("DraftKings Opponents Finder: Not on lobby page, exiting");case 2:case"end":return t.stop()}var e,n}),t)})))).apply(this,arguments)}window.addEventListener("load",(function(){console.log("DraftKings Opponents Finder: Page loaded, running main function"),F()}));var S=location.href;new MutationObserver((function(){var t=location.href;t!==S&&(S=t,console.log("DraftKings Opponents Finder: URL changed, running main function"),F())})).observe(document,{subtree:!0,childList:!0}),window.addEventListener("scroll",(function(){console.log("DraftKings Opponents Finder: Scroll event detected"),D()})),window.addEventListener("resize",(function(){console.log("DraftKings Opponents Finder: Resize event detected"),D()}))})();